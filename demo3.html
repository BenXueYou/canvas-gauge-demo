<!DOCTYPE html>
<html>

<head>
    <title>飞行仪表盘</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        .instrument-container {
            position: relative;
            width: 400px;
            height: 400px;
        }
        canvas {
            background-color: #222;
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        .controls {
            position: absolute;
            bottom: -60px;
            width: 100%;
            display: flex;
            justify-content: space-around;
        }
        input {
            width: 150px;
        }
        .yaw-pointer {
            position: absolute;
            top: 0;
            left: 50%;
            width: 20px;
            height: 20px;
            background-color: red;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 10;
            transform-origin: 50% 100%;
        }
    </style>
</head>

<body>
     <div class="instrument-container">
        <div class="yaw-pointer" id="yawPointer"></div>
        <canvas id="horizon" width="400" height="400"></canvas>
        <div class="controls">
            <div>
                <label for="yaw">偏航角 (-360-360°):</label>
                <input type="range" id="yaw" min="-360" max="360" value="0">
            </div>
            <div>
                <label for="pitch">俯仰角 (-90-90°):</label>
                <input type="range" id="pitch" min="-90" max="90" value="0">
            </div>
        </div>
    </div>
    <script src="./dist/gauge.js"></script>
    <script>
        // 使用示例
        const canvas = document.getElementById('horizon');
        const gauge = new Gauge(canvas, {
            minAngle: -360,
            maxAngle: 360,
            minPitch: -90,
            maxPitch: 90,
            skyColor: '#87CEEB',
            groundColor: '#8B4513',
            scaleColor: '#fff'
        });

        // 更新偏航指针位置
        function updateYawPointer(yaw) {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) + 20;

            const normalizedYaw = ((yaw % 360) + 360) % 360;
            const angle = (normalizedYaw - 90) * Math.PI / 180;
            const pointerX = centerX + Math.cos(angle) * radius;
            const pointerY = centerY + Math.sin(angle) * radius;

            const yawPointer = document.getElementById('yawPointer');
            yawPointer.style.left = `${pointerX}px`;
            yawPointer.style.top = `${pointerY}px`;
            yawPointer.style.transform = `translate(-50%, -100%) rotate(${normalizedYaw - 180}deg)`;
        }

        // 动画循环
        function animate() {
            gauge.draw();
            updateYawPointer(gauge.yaw);
            requestAnimationFrame(animate);
        }

        // 事件监听
        document.getElementById('yaw').addEventListener('input', (e) => {
            gauge.setYaw(parseInt(e.target.value));
        });

        document.getElementById('pitch').addEventListener('input', (e) => {
            gauge.setPitch(parseInt(e.target.value));
        });

        // 启动动画
        animate();

    </script>
</body>

</html>